# 声劇等ライブ配信におけるPCからの配信環境について

本記事では、ボイコネなどの音声配信サービスにPCから、効果音・BGMなどを含めて配信するための機器の接続・設定について解説します。
対象はmacOSですが、Windowsにも応用はできると思います。

# きっかけ

これまで、配信時にはYAMAHA AG03というネット配信では定番のオーディオインターフェースを使っていたのですが、ちょっとゆえあって、SSL2に変えました。しかし、変えてみると、これまでのやりかたではうまくいかないことがわかってきました。

AG03の最大の特徴は、PC上で再生される音とマイクからの入力を合成して配信できる、ループバック機能です。つまり、AG03はミキサー+オーディオインターフェースの機能を兼ね備えた製品です。一方、SSL2は純粋なオーディオインターフェースであるため、そのような便利な機能はありません。

この記事では、AG03のようにループバック機能のないオーディオインターフェースで効果音・BGM付きの配信を行う方法を説明します。違う機種に変えてみて、改めて、AG03はほんとうに便利な機械だったんだなあということを実感しました。PCでの配信をこれからはじめるという方とりあえず推薦するなら、やはりAG03だと思います。

ただ、AG03でのループバックモードでの配信について改めて考えると、声劇のような多人数同時配信では、他の人の声も拾って自分の端末から再配信していることになるはずなので、声が二重に聴こえてしまうのではないかという懸念があります。自分の過去の配信でそういう問題が出ていなかったのは、ちょっと不思議です(もしくは問題が出ていたのに気付かなかった?)。

この記事で説明する方法では、純粋に自分のマイクの音とDAWからの音のみを配信するので、他の演者の音声を二重に配信する心配はありません。

# 二つの配信方法

本記事では、2つの異なる方法を説明します。ひとつは、A.オーディオインターフェースのチャンネル2にDAWからの出力を流し込んでマイクと効果音をミックスする方法。もう一つは、B.DAW上でマイクも含めてすべてをミックスした上で配信する方法。どちらもメリット・デメリットがあります。

Aメリット:

* マイクの余分な遅延がない
* ソフトの設定がシンプル

Aデメリット:

* Bよりケーブルが一本多い(オーディオインターフェースとPCの間の接続)
* ハードウェアでマイクミュートするのに高価な機器が必要
* ほんのすこしノイズが乗る(気にならないレベル)

Bメリット:

* ケーブルがAより少なくてスッキリ
* APC mini(MIDIコントローラー)だけで配信中の操作が完結する
* ノイズが乗らない

Bデメリット

* ソフトの設定がやこしい
* マイク音声に如実な遅延が出る

わたしは、遅延と構成のシンプルさから、Aの方法で配信しています。

# A.オーディオインターフェースのチャンネル2にDAWからの出力を流し込んでマイクと効果音をミックスする方法

図のようにオーディオインターフェースのチャンネル1にマイクを、オーディオインターフェースのチャンネル2にDAWからの出力(効果音・BGM)を流し込みます。
チャンネル2は、PCの外部ヘッドフォン端子(ミニプラグ)に接続して、[このような](https://www.amazon.co.jp/gp/product/B0010CTL66/)アダプタでXLRに変換しています。
構成としては直感的で非常にシンンプルです。

PCの入力・出力は両方オーディオインターフェースにしておきます。外部ヘッドフォンにしてしまうと、ブラウザから拾った他の演者の声を再度ブラウザに流してしまうことになるため、注意してください(逆に、他の配信者がいない単独配信でPCの音をすべて拾いたいときなどは、外部ヘッドフォンにすれば良いです)。
SSL2のモニターノブはINPUTとUSB半々にしておきます。これで、共演者の声と自分の音両方モニタリングできます。

ただ、いくつかハマった点もあったので補足。

## USBハブを使うとノイズが乗る

まず、DAWとPCの間の接続にUSBハブをかましていたのですが、これだとチャンネル2に強くノイズが乗ってしまって使えませんでした。ハブを経由せずPCと直接接続することで、これは軽減できました。オーディオインターフェースのマニュアルなどにも、USBハブとかは挟まないほうがいいと書いてあるのですが、なるほど、こういうことなんですね。ただし、それでもうっすらではありますが、ノイズは残っているようです(ライブ配信ならこのくらいは許容範囲と判断しています)。

## ミュートの実現方法

次に、ミュート。声劇中、人のセリフの間は自分のマイクをミュートしておきたいですよね。PCからの配信の場合、ブラウザ上のミュートボタンをマウスでクリックすると「カチッ」という音が入ってしまうし、操作も煩雑なのでなるべく避けたいです。AG03では、フェーダーを下げるという操作でミュートができていました。SSL2にもチャンネルごとにゲインノブがあるので、これを0にすればミュートできる…と思っていたのです。ところが、SSL2のゲインノブは0まで下げてもミュートにならず、うっすら音が入ってきてしまうのです。これはそういう[仕様](https://solidstatelogic.zendesk.com/hc/en-us/articles/360018471777-I-still-see-meters-when-gain-is-all-the-way-down)のようです。なので、別の方法でミュートを実現する必要があります。

まず、パッと思いついたのが、パッシブプリアンプと呼ばれる、信号増幅を行なわない純粋にレベル調整のみを行う装置をマイクとの間に挟めば、AG03のフェーダーと同じような機能を実現できるのではないかということでした。そこで、Behringer社の[MONITOR1](https://www.behringer.com/product.html?modelCode=P0C9G)という商品を試してみました。ところが、これはノブやスイッチの操作をしたときに「バリバリッ」という強烈なノイズが走ってしまいます。これでは、目的の用途には使えません(※すぐ返品しました)。

そこで、もっといい何かがないかと探していたところ見つけたのが、TOMOCA TCC-60。これはいわゆるカフフェーダーというやつで、プロのナレーターの方なんかも現場で使っているようなものです。商品説明にもON/OFF時に雑音を発生しないとあったため、これならイケるかも、と思って試してみたところ、見事に機能してくれました。すばらしい商品です。使っていると、なんかプロっぽい気分になれるという副次効果もあります。ただし、業務用とあって値段は4万円かなり高額です。

# B.DAW上でマイクも含めてすべてをミックスした上で配信する方法

こちらは、オーディオインターフェースの1chのみを使います。機械的な配線はこちらのほうがシンプルです。基本的な考えかたとしては、DAW(Ableton Live Lite)上で必要な音をすべてミックスしてから、オーディオインターフェースに送るという形になります。

DAW上で、図のようにマイクからの入力を取るためのトラックを一つ用意します。残りは効果音やBGMの再生に使います。
これでオーディオインターフェースの出力する音は、マイク+効果音・BGMのミックスされた音声になります。

次に、この音声をモニタリングしつつブラウザから配信するために、macOS標準のAudio MIDI 設定というアプリとBlackHoleという仮想ドライバーを使います。

Audio MIDI 設定を使うと複数出力装置という特殊な仮想ドライバーを作成できます。これを使い、図のようにオーディオインターフェースからの音とBlackHoleからの音をまとめる複数出力装置を作成します。これを図のようにDAWの出力先として設定すれば、ブラウザに音声配信しつつ、オーディオインターフェースからモニタリングが可能になります。
PCのデフォルト入力デバイスは図のようにBlackHoleにしておきます。これで、ブラウザがDAWの出力を拾ってくれます。

SSL2のモニターノブは、DAWの出力にすべて入っているため、USB 100%でOKです。

ただし、マイクの音を一旦PCに取り込んでDAWで処理してから改めて出力という経路になるため、どうしても遅延が発生します。遅延する自分の声を聞きながらだと演技に支障を来すため、Buffer Sizeをなるべく小さくして遅延を抑えます。64サンプルくらいまで下げると、5ミリ秒程度まで遅延を抑えられました。実際にこの設定で声劇をやってみましたが、まあできなくはない、といった感じでした。

マイクのミュートは、他の効果音と同様APC mini(MIDIコントローラー)から行います。また、配線がソフト上で完結しているので、Aと違ってチャンネル2からノイズが乗ってくることもありません。

# ソフト

BlackHole https://existential.audio/blackhole/

仮想オーディオドライバー。PCからはスピーカーやマイクのように見えます。BlackHaleを入力デバイスとして使うと、BlackHoleに出力した音がそのまま入力されます。これにより、DAW上でミックスした音をネット配信できます。

Ableton Live Lite https://www.ableton.com/en/products/live-lite/

APC miniに付いてくるDAW。主に配信用ポン出しソフトとして使う。

# 機械

AG03 https://jp.yamaha.com/products/music_production/webcasting_mixer/ag03/index.html
Behringer MONITOR1 https://www.behringer.com/product.html?modelCode=P0C9G

SSL2 https://www.solidstatelogic.com/products/ssl2

2チャンネルの入力ポートを備えたオーディオインターフェース。マイク等からの入力音声とDAW等からの出力音声をミックスしてモニタリングできます(ミックス量はノブで調整可)。

TOMOCA TCC-60 https://www.tomoca.co.jp/brand/tomoca-p/top-cough/tcc-60/

フェーダーで入力のON/OFFを切り替えられます。マイクをミュートするために使います。

APC mini http://akai-pro.jp/apcmini/

Ableton Liveに接続して使うMIDIコントローラーです。64個のボタンがついており、ソフト上でそれぞれに音源を割り当てて再生したり、フェードをかけるなどの操作行います。

https://support.apple.com/ja-jp/HT202000
